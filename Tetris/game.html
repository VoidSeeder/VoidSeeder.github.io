<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>myTetris</title>
	<link rel="stylesheet" href="game.css">
</head>

<body>
	<div class="game">
		<canvas id="gameScreen" height="700" width="700"></canvas>
	</div>

	<script type="module">
		import newGraphicCanvas from './graphic.js';
		import newGame from './game.js';
		import newKeyboardListner from './keyboard.js';
		import newSound from './sounds.js';

		window.onload = () => {
			const graphicInstance = newGraphicCanvas(window, "gameScreen");
			const gameInstance = newGame();
			const keyboardInstance = newKeyboardListner(window);
			const soundInstance = newSound();

			gameInstance.subscribe(graphicInstance.stateUpdate);
			gameInstance.subscribe(soundInstance.soundObserver);
			keyboardInstance.subscribe(gameInstance.getInput);
		}
	</script>
</body>

</html>